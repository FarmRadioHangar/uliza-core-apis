version: '2'
services:
  django_api_database:
    image: mysql
    ports:
      - "3308:3306"
    environment:
      MYSQL_ROOT_PASSWORD: root
    volumes:
      - ./docker/mysql:/var/lib/mysql
  django_api_service:
    build: ../../../django-api/
    command: python manage.py runserver 0.0.0.0:8000
    ports:
        - "8000:8000"
    links:
        - django_api_database
    environment:
        DEBUG: "true"
        DATABASE_NAME: api_core
        DATABASE_USER: root
        DATABASE_PASSWORD: root
        DATABASE_SERVICE_HOST: django_api_database
# api:
#  middleware:
#    build: ../../registration-middleware/
#    ports: 
#      - "3034:3034"
#    links: 
#      - postgrest:postgrest
#    depends_on:
#      - postgrest
#      - database
